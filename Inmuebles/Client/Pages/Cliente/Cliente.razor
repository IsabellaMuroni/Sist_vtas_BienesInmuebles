@page "/Cliente"
@inject NavigationManager NavigationManager


<h1>Cliente</h1>

<button class="btn btn-primary" @onclick = "AltaCliente">Alta Cliente</button>


<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Dirección</th>
            <th>Correo electrónico</th>
            <th>Teléfono</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        @if (result != null)
        {
            foreach (clientSwagger.Cliente cliente in result)
            {
                <tr>
                    <td>@cliente.Id_cliente</td>
                    <td> @cliente.Nombre_cliente</td>
                    <td>@cliente.Dir_cliente</td>
                    <td>@cliente.Correo_cliente</td>
                    <td>@cliente.Telefono_cliente</td>                 
                    <td>
                        <button type="button" class="btn btn-primary"><a asp-action="Edit">Editar</a></button> |
                        <button type="button" class="btn btn-danger"> <a asp-action="Delete">Eliminar</a></button>
                   </td>

            </tr>
            }
        }
        
    </tbody>
</table>



@code {
    void AltaCliente()
    {
        NavigationManager.NavigateTo("/Cliente/AltaCliente");
    }

    private ICollection<clientSwagger.Cliente> result;
    private clientSwagger.clientSwagger client = new clientSwagger.clientSwagger("https://localhost:7260/", new HttpClient());

    private async Task Refresh()
    {
        result = await client.ClienteAllAsync();
    }

    protected override async Task OnInitializedAsync()
    {
        await Refresh();
    }
}
